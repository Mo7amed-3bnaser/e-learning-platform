# خطة إكمال منصة E-Learning

## تقدير نسبة الإنجاز الحالية: **حوالي 75–80%**

المشروع فيه أساس قوي: auth، كورسات، مشاهدة، تقدم، شهادات، تقييمات، أدمن، ومدرس. اللي ناقص غالباً دفعات حقيقية، استعادة كلمة المرور، وصفحات أخطاء وربط واجهة المدرس بتعديل الكورس وإدارة الفيديوهات (حسب ما تريد).

---

## ما تم إنجازه (ملخص)

| المنطقة                   | الحالة | ملاحظات                                                                                                                   |
| ------------------------- | ------ | ------------------------------------------------------------------------------------------------------------------------- |
| **الرئيسية والكورسات**    | مكتمل  | هيرو، تصفح، بحث، فلترة حسب الفئة                                                                                          |
| **التسجيل والدخول**       | مكتمل  | register, login, profile, avatar                                                                                          |
| **صفحة كورس واحد**        | مكتمل  | تفاصيل، تقييمات، زر شراء                                                                                                  |
| **الدفع (Checkout)**      | جزئي   | يعمل **Sandbox** فقط (دفع تجريبي فوري)                                                                                    |
| **كورساتي + المشاهدة**    | مكتمل  | قائمة، مشاهدة فيديو، تقدم، تعليقات، شهادة عند 100%                                                                        |
| **الشهادات**              | مكتمل  | توليد PDF، تحميل، عرض في صفحة المشاهدة                                                                                    |
| **الأدمن**                | مكتمل  | إحصائيات، طلاب، طلبات، كورسات، فيديوهات، طلبات مدربين                                                                     |
| **المدرب**                | جزئي   | تقديم طلب، داشبورد، إنشاء كورس، قائمة كورساته. **تعديل كورس وإضافة فيديوهات**: في الباك اند/أدمن فقط وليس في واجهة المدرب |
| **طلبات الشراء الحقيقية** | جزئي   | الباك اند يدعم (vodafone_cash, instapay, bank_transfer + screenshot) لكن الواجهة لا تعرض إلا Sandbox                      |

---

## الخطوات المقترحة لإكمال الموقع (حتى ~100%)

### 1) الدفع الحقيقي (أهم خطوة للإنتاج)

- **الوضع الحالي:** Front-End/src/app/checkout/[id]/page.tsx يستخدم فقط `ordersAPI.sandboxPayment(courseId)`.
- **المطلوب (اختر أحد المسارين):**
  - **أ) دفع يدوي (بدون بوابة):** في صفحة الـ Checkout إضافة خيارات (فودافون كاش / انستاباي / تحويل بنكي)، حقل رفع **صورة إثبات الدفع**، واستدعاء `ordersAPI.createOrder` بدل الـ sandbox. الأدمن يبقى يراجع ويوافق من admin/orders (الـ API موجود فعلاً في orderController.js).
  - **ب) بوابة دفع حقيقية:** دمج Stripe أو Paymob (أو غيرهما) ثم استبدال الـ Sandbox في الـ Checkout بهذه البوابة.

بدون أحد هذين المسارين، الموقع يبقى للتجربة فقط.

---

### 2) نسيت كلمة المرور / إعادة تعيينها

- **الوضع الحالي:** Back-End/routes/authRoutes.js فيه فقط register, login, profile, avatar. لا يوجد forgot/reset password.
- **المطلوب:**
  - في الباك اند: endpoints مثل `POST /api/auth/forgot-password` (يرسل رمز أو رابط عبر الإيميل) و `POST /api/auth/reset-password` (باستخدام الرمز أو الـ token).
  - في الفرونت: صفحة "نسيت كلمة المرور" (إدخال إيميل) وصفحة "تعيين كلمة مرور جديدة" (رابط من الإيميل).
  - يحتاج إعداد إرسال إيميل (مثلاً Nodemailer + Gmail أو خدمة مثل SendGrid).

---

### 3) صفحة 404 (Not Found)

- **الوضع الحالي:** لا يوجد `not-found.tsx` في Front-End/src/app.
- **المطلوب:** إضافة `app/not-found.tsx` في Next.js لعرض صفحة 404 عربية منسقة عند أي مسار غير موجود.

---

### 4) واجهة المدرب: تعديل كورس + إدارة الفيديوهات

- **الوضع الحالي:** المدرب يضيف كورس من dashboard/instructor/courses/create والـ API يدعم تحديث كورس (instructorApi.updateCourse). إضافة/تعديل الفيديوهات في الباك اند مسموح **للأدمن فقط** (videoRoutes.js).
- **المطلوب (حسب رغبتك):**
  - إما **منح المدرب صلاحية إدارة فيديوهات كورساته:** في الباك اند إضافة middleware (مثل instructorOrAdmin أو التحقق من ملكية الكورس) على routes الفيديو، وفي الفرونت إضافة صفحات تحت dashboard/instructor/courses/[id]/ لـ (تعديل بيانات الكورس + قائمة الفيديوهات + إضافة/تعديل/حذف فيديو).
  - أو الإبقاء على أن **الأدمن فقط** يضيف الفيديوهات (من admin/courses/[id]/videos) وتوثيق ذلك في الـ README أو داخل التطبيق.

---

### 5) تنقية كود الإنتاج

- إزالة أي `console.log` غير ضروري (مثلاً في Front-End/src/app/courses/page.tsx عند جلب الطلبات).
- مراجعة أي تعليقات TODO/FIXME وإما تنفيذها أو إزالتها.

---

### 6) اختياري (تحسينات إضافية)

- **التحقق من الإيميل:** تسجيل بحساب جديد ثم تفعيل عبر رابط إيميل.
- **SEO:** وصف وربط صفحات الكورسات والرئيسية مع `metadata` في Next.js.
- **بيئة الإنتاج:** التأكد من `NEXT_PUBLIC_API_URL` و `CLIENT_URL` وربط الدومين، وإخفاء مفاتيح الـ API.

---

## ترتيب مقترح للتنفيذ

1. **الدفع الحقيقي** (يدوي أو بوابة) حتى يصبح الموقع قابلاً للاستخدام فعلياً.
2. **نسيت كلمة المرور + صفحة 404** لتحسين تجربة المستخدم والأمان.
3. **واجهة المدرب (تعديل كورس + فيديوهات)** إن أردت أن يدير المدرب محتوى كورساته بنفسه.
4. **تنقية الكود** ثم التحسينات الاختيارية.

بعد تنفيذ (1 + 2 + 3 أو 4) يمكن اعتبار المنصة **مكتملة من ناحية الوظائف الأساسية** ونسبة الإنجاز قريبة من **95–100%** حسب ما تضفيه من اختياري.
